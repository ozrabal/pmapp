---
import Layout from "../../../layouts/Layout.astro";
import ProjectHeader from "../../../components/projects/ProjectHeader.astro";
import ProjectTabsNavigation from "../../../components/projects/ProjectTabsNavigation";
import { AssumptionsForm } from "../../../components/projects/assumptions/AssumptionsForm";
import { BackToProjectsButton } from "../../../components/projects/BackToProjectsButton";
import type { ProjectTabProps, TabType } from "../../../components/projects/types";

export const prerender = false;

const { id } = Astro.params;

if (!id) {
  return Astro.redirect("/dashboard");
}

// Active tab is 'assumptions'
const activeTab: TabType = "assumptions";

// Define tabs with proper typing and navigation logic in onClick handlers
const tabs: ProjectTabProps[] = [
  {
    id: "descriptions",
    label: "Overview",
    isActive: false,
  },
  {
    id: "assumptions",
    label: "Assumptions",
    isActive: true,
  },
  {
    id: "functionalBlocks",
    label: "Functional Blocks",
    isActive: false,
  },
  {
    id: "schedule",
    label: "Schedule",
    isActive: false,
  },
];
---

<Layout title="Project Assumptions">
  <div class="container mx-auto p-4 md:p-6 max-w-6xl space-y-6">
    <div class="flex justify-between items-center">
      <BackToProjectsButton />
    </div>

    <ProjectHeader projectId={id} />

    <ProjectTabsNavigation projectId={id} client:load tabs={tabs} activeTab={activeTab} />

    <AssumptionsForm client:load projectId={id} />
  </div>
</Layout>
