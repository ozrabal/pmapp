---
import Layout from "@/layouts/Layout.astro";
import ProjectHeader from "@/components/projects/ProjectHeader.astro";
import ProjectTabsNavigation from "@/components/projects/ProjectTabsNavigation";
import ScheduleContainer from "@/components/projects/schedule/ScheduleContainer";
import { ErrorBoundary } from "../../../components/dashboard/ErrorBoundary";
import type { ProjectTabProps } from "@/components/projects/types";
import { BackToProjectsButton } from "@/components/projects/BackToProjectsButton";

const { id } = Astro.params;

if (!id) {
  return Astro.redirect("/dashboard");
}

const pageTitle = "Harmonogram projektu";

const tabs: ProjectTabProps[] = [
  {
    id: "descriptions",
    label: "Opisy",
    isActive: false,
    disabled: false,
  },
  {
    id: "assumptions",
    label: "Założenia",
    isActive: false,
    disabled: false,
  },
  {
    id: "functional-blocks",
    label: "Funkcjonalności",
    isActive: false,
    disabled: false,
  },
  {
    id: "schedule",
    label: "Harmonogram",
    isActive: true,
    disabled: false,
  },
];
---

<Layout title={pageTitle}>
  <div class="mb-6">
    <div class="flex justify-between items-center mb-4">
      <BackToProjectsButton client:load />
    </div>

    <ProjectHeader projectId={id} />
  </div>

  <div class="mt-6 mb-8">
    <ProjectTabsNavigation tabs={tabs} projectId={id} activeTab="schedule" client:load />
  </div>

  <section class="mt-8">
    <ErrorBoundary client:load>
      <ScheduleContainer client:load projectId={id} />
    </ErrorBoundary>
  </section>
</Layout>
