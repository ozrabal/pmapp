---
import Layout from "@/layouts/Layout.astro";
import { ErrorBoundary } from "@/components/dashboard/ErrorBoundary";
import EditProjectForm from "@/components/dashboard/EditProjectForm";

// Get the project ID from URL params
const { id } = Astro.params;

// Set page metadata
const pageTitle = "Edycja projektu";
---

<Layout title={pageTitle}>
  <main class="container max-w-4xl mx-auto px-4 py-8">
    <div class="mb-8">
      <nav class="mb-4" aria-label="Ścieżka nawigacji">
        <ol class="flex text-sm">
          <li class="flex items-center">
            <a
              href="/dashboard"
              class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors"
            >
              Dashboard
            </a>
            <svg
              class="h-4 w-4 mx-2 text-gray-400"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </li>
          <li class="flex items-center">
            <a
              href={`/projects/${id}`}
              class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors"
            >
              Szczegóły projektu
            </a>
            <svg
              class="h-4 w-4 mx-2 text-gray-400"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </li>
          <li>
            <span class="text-gray-500 dark:text-gray-400" aria-current="page">{pageTitle}</span>
          </li>
        </ol>
      </nav>

      <header>
        <h1 class="text-3xl font-bold tracking-tight">{pageTitle}</h1>
        <p class="text-slate-500 dark:text-slate-400 mt-2">Zaktualizuj informacje o swoim projekcie poniżej.</p>
      </header>
    </div>

    <section aria-labelledby="edit-project-form">
      <h2 id="edit-project-form" class="sr-only">Formularz edycji projektu</h2>
      <ErrorBoundary client:load>
        <EditProjectForm projectId={id || ""} client:load />
      </ErrorBoundary>
    </section>
  </main>
</Layout>
